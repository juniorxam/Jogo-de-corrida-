<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neo Runners - Criado por JuniorXam</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --neon-br: #00f2ff; --favela-style: #121212; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Verdana', sans-serif; }

        /* HUD - Interface de Usuário */
        #hud-brasil { 
            position: absolute; inset: 0; z-index: 100; pointer-events: none; 
            display: none; flex-direction: column; justify-content: space-between; 
        }
        
        .topo { padding: 25px; display: flex; justify-content: space-between; align-items: center; }
        .marca-autor { color: var(--neon-br); font-weight: bold; font-size: 12px; letter-spacing: 2px; text-transform: uppercase; }
        .placar-box { background: rgba(0,0,0,0.85); padding: 12px 25px; border: 2px solid var(--neon-br); border-radius: 8px; box-shadow: 0 0 15px var(--neon-br); }
        .pontos { color: #fff; font-size: 30px; font-weight: 900; }

        /* Controles Mobile/Touch */
        .painel-controle { padding: 40px; display: flex; justify-content: space-between; pointer-events: auto; }
        .botao-comando { 
            width: 85px; height: 85px; background: rgba(0, 242, 255, 0.15); border: 2px solid var(--neon-br); 
            border-radius: 20px; color: var(--neon-br); font-size: 35px; cursor: pointer; 
            display: flex; align-items: center; justify-content: center; transition: 0.1s;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }
        .botao-comando:active { background: var(--neon-br); color: #000; transform: scale(0.9); }

        /* Tela de Boas-Vindas */
        #tela-inicio { 
            position: absolute; inset: 0; background: radial-gradient(circle, #1a1a1a, #000); 
            z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #fff; text-align: center;
        }
        .btn-play { 
            margin-top: 30px; padding: 18px 50px; background: var(--neon-br); border: none; 
            font-weight: bold; cursor: pointer; text-transform: uppercase; border-radius: 8px; font-size: 18px;
            box-shadow: 0 0 20px var(--neon-br);
        }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="tela-inicio">
        <h1 style="letter-spacing: 8px; margin-bottom: 0;">NEO RUNNERS</h1>
        <p style="color: var(--neon-br); letter-spacing: 4px; font-weight: bold;">CRIADO POR JUNIORXAM</p>
        <button class="btn-play" onclick="ligarMotores()">Dê a Partida</button>
    </div>

    <div id="hud-brasil">
        <div class="topo">
            <div class="marca-autor">DEV: JUNIORXAM</div>
            <div class="placar-box">
                <span id="valor-placar" class="pontos">0000</span>
            </div>
        </div>
        <div class="painel-controle">
            <div class="botao-comando" id="btn-esq">◀</div>
            <div class="botao-comando" id="btn-dir">▶</div>
        </div>
    </div>

    <script>
        let cena, camera, render, carro, rodas = [], obstaculos = [];
        let jogando = false, pontos = 0, vapt = 2.6, xAlvo = 0;
        const PISTA = 5;

        // Gerador de Adesivo em Tempo Real (JS Puro)
        function gerarAdesivoJuniorXam() {
            const canvas = document.createElement('canvas');
            canvas.width = 512; canvas.height = 256;
            const ctx = canvas.getContext('2d');
            
            // Fundo e Design do Adesivo
            ctx.fillStyle = "#000000";
            ctx.fillRect(0, 0, 512, 256);
            
            // Estilo do Nome
            ctx.fillStyle = "#00f2ff";
            ctx.font = "bold 70px Impact";
            ctx.textAlign = "center";
            ctx.shadowBlur = 15;
            ctx.shadowColor = "#00f2ff";
            ctx.fillText("JUNIORXAM", 256, 145);
            
            // Moldura Neon
            ctx.strokeStyle = "#00f2ff";
            ctx.lineWidth = 15;
            ctx.strokeRect(10, 10, 492, 236);

            return new THREE.CanvasTexture(canvas);
        }

        function ligarMotores() {
            document.getElementById('tela-inicio').style.display = 'none';
            document.getElementById('hud-brasil').style.display = 'flex';

            // Configuração Básica do Motor 3D
            cena = new THREE.Scene();
            cena.background = new THREE.Color(0x020205);
            cena.fog = new THREE.Fog(0x020205, 40, 180);

            camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 6, 16);

            render = new THREE.WebGLRenderer({ antialias: true });
            render.setSize(window.innerWidth, window.innerHeight);
            render.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(render.domElement);

            // Luzes do Palco
            scene_lights();

            // Estrada Infinita
            const road = new THREE.Mesh(
                new THREE.PlaneGeometry(25, 10000),
                new THREE.MeshStandardMaterial({ color: 0x0a0a0a, roughness: 0.1 })
            );
            road.rotation.x = -Math.PI / 2;
            cena.add(road);

            // MONTAGEM DO HYPERCAR JUNIORXAM
            carro = new THREE.Group();
            
            // Chassi Principal
            const carMat = new THREE.MeshStandardMaterial({ color: 0x080808, metalness: 0.9, roughness: 0.1 });
            const body = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.65, 5.2), carMat);
            body.position.y = 0.7;
            carro.add(body);

            // APLICAÇÃO DO ADESIVO (Capô)
            const adesivoMat = new THREE.MeshBasicMaterial({ map: gerarAdesivoJuniorXam() });
            const adesivoMesh = new THREE.Mesh(new THREE.PlaneGeometry(2.2, 1.1), adesivoMat);
            adesivoMesh.position.set(0, 1.05, 0.6); 
            adesivoMesh.rotation.x = -Math.PI / 2;
            carro.add(adesivoMesh);

            // Rodas com Volume 3D Real
            const pneuGeo = new THREE.CylinderGeometry(0.5, 0.5, 0.5, 32);
            const pneuMat = new THREE.MeshStandardMaterial({ color: 0x111111 });
            const rodasPos = [{x:-1.4, z:1.8}, {x:1.4, z:1.8}, {x:-1.4, z:-1.8}, {x:1.4, z:-1.8}];
            
            rodasPos.forEach(p => {
                const r = new THREE.Mesh(pneuGeo, pneuMat);
                r.rotation.z = Math.PI / 2;
                r.position.set(p.x, 0.5, p.z);
                carro.add(r);
                rodas.push(r);
            });

            cena.add(carro);
            
            configControles();
            jogando = true;
            setInterval(gerarObstaculo, 380);
            renderLoop();
        }

        function scene_lights() {
            cena.add(new THREE.AmbientLight(0xffffff, 0.3));
            const dLight = new THREE.DirectionalLight(0xffffff, 1.8);
            dLight.position.set(10, 25, 15);
            cena.add(dLight);
        }

        function configControles() {
            const moveE = () => { if(xAlvo > -PISTA) xAlvo -= PISTA; };
            const moveD = () => { if(xAlvo < PISTA) xAlvo += PISTA; };

            document.getElementById('btn-esq').addEventListener('pointerdown', moveE);
            document.getElementById('btn-dir').addEventListener('pointerdown', moveD);
            window.addEventListener('keydown', (e) => {
                if(e.key === "ArrowLeft") moveE();
                if(e.key === "ArrowRight") moveD();
            });
        }

        function gerarObstaculo() {
            if(!jogando) return;
            const obs = new THREE.Mesh(
                new THREE.BoxGeometry(3.8, 2.2, 3.5),
                new THREE.MeshStandardMaterial({ color: 0xee0000 })
            );
            obs.position.set((Math.floor(Math.random() * 3) - 1) * PISTA, 1.1, -200);
            cena.add(obs);
            obstaculos.push(obs);
        }

        function renderLoop() {
            if(!jogando) return;
            requestAnimationFrame(renderLoop);

            // Movimentação Dinâmica do JuniorXam
            carro.position.x += (xAlvo - carro.position.x) * 0.15;
            carro.rotation.z = -(xAlvo - carro.position.x) * 0.1;
            rodas.forEach(r => r.rotation.x += 0.35); // Rodas girando

            camera.position.x = carro.position.x * 0.4;
            camera.lookAt(carro.position.x, 1, 0);

            // Lógica de Obstáculos e Colisão
            obstaculos.forEach((o, i) => {
                o.position.z += vapt;
                
                if(Math.abs(carro.position.x - o.position.x) < 2.6 && Math.abs(o.position.z - carro.position.z) < 2.8) {
                    jogando = false;
                    alert("BATIDA! PLACAR DE JUNIORXAM: " + pontos);
                    location.reload();
                }

                if(o.position.z > 20) {
                    cena.remove(o);
                    obstaculos.splice(i, 1);
                    pontos += 10;
                    document.getElementById('valor-placar').innerText = pontos.toString().padStart(4, '0');
                }
            });

            vapt += 0.0015;
            render.render(cena, camera);
        }
    </script>
</body>
</html>
